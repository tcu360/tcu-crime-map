<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>TCU crime map | TCU 360</title>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta content='The TCU 360 crime map tracks crimes reported by TCU Police on the TCU campus.' name='description' />
    <!-- Styles -->
    <link href='http://fonts.googleapis.com/css?family=Lato:400,400italic,700,900' rel='stylesheet'>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/daterangepicker.css"/>
    <link rel="stylesheet" href="css/custom.css"/>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <header class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.tcu360.com/"></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            <li><a href="http://www.tcu360.com/">Home</a></li>
            <li><a href="http://www.tcu360.com/news/campus">Campus</a></li>
            <li><a href="http://www.tcu360.com/sports">Sports</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="social"><a href="http://www.facebook.com/tcu360" target="_blank"><i class="icon-facebook"></i></a></li>
            <li class="social"><a href="http://www.twitter.com/tcu360" target="_blank"><i class="icon-twitter"></i></a></li>
            <li class="social"><a href="http://www.instagram.com/tcu360" target="_blank"><i class="icon-instagram"></i></a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </header>
    <div class='container'>
      <div class='row'>
        <div class='col-sm-5 col-md-4 col-lg-3'>
          <div class='page-header'>
            <h1>Crime map</h1>
          </div>
          <p>This is a demo of <a href='http://derekeder.com'>Derek Eder's</a> <a href='http://derekeder.com/searchable_map_template/'>Searchable Map Template</a> using Google <a href='http://support.google.com/fusiontables/answer/2571232?hl=en&ref_topic=1652595'>Fusion Tables</a>. Use this section to give a little context your map. Maybe a link to <a href='#'>read more &raquo;</a></p>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4>
              Address
              <small>(<a id='find_me' href='#'>find me</a>)</small></h4>
            </div>
            <div class="panel-body">
              <div class="input-group">
                <input id='search_address' type="text" class="form-control" placeholder='Enter an address'>
                <div class="input-group-btn">
                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Search <span class="caret"></span></button>
                  <ul id="search" class="dropdown-menu pull-right">
                    <li><a href="#" data-distance="400" class='radius'>within 2 blocks</a></li>
                    <li><a href="#" data-distance="805" class='radius'>within 1/2 mile</a></li>
                    <li><a href="#" data-distance="1610" class='radius'>within 1 mile</a></li>
                    <li><a href="#" data-distance="3220" class='radius'>within 2 mile</a></li>
                    <li class="divider"></li>
                    <li><a href="#" class='reset'>Reset</a></li>
                  </ul>
                </div><!-- /btn-group -->
              </div><!-- /input-group -->
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4>Date reported</h4>
            </div>
            <div class="panel-body">
              <div class="input-group">
                <input type="text" class="form-control" name="daterange" id="daterange" />
                <span class="input-group-addon"><i class="icon-calendar"></i></span>
              </div>
              <p class="help-block">It may take several days for incidents to show on the map.</p>    
            </div>
          </div>
          <div class="panel panel-default filter-incident-type">
            <div class="panel-heading">
              <h4>Incident type</h4>
            </div>
            <div class="panel-body">
              <div class='checkbox'>
                <label>
                  <input type='checkbox' />
                  City drop-off location<span class="badge badge-green pull-right">42</span>
                </label>
              </div>
              <div class='checkbox'>
                <label>
                  <input type='checkbox' />
                  Private business<span class="badge badge-cyan pull-right">42</span>
                </label>
              </div>
              <div class='checkbox'>
                <label>
                  <input type='checkbox' />
                  Hazardous materials<span class="badge badge-orange pull-right">42</span>
                </label>
              </div>
              <div class='checkbox'>
                <label>
                  <input type='checkbox' />
                  Hazardous materials<span class="badge badge-red pull-right">42</span>
                </label>
              </div>
              <div class='checkbox'>
                <label>
                  <input type='checkbox' />
                  Hazardous materials<span class="badge badge-blue pull-right">42</span>
                </label>
              </div>
              <hr />
              <label class='checkbox-inline'>
                <strong>Total</strong>
              </label>
              <span id="result_count" class="badge pull-right">42</span>
            </div>
          </div>
        </div>
        <div class='col-sm-7 col-md-8 col-lg-9'>
          <div id='results'>
            <div id='map_canvas' style="height:400px;"></div>
            <table class='table table-responsive table-hover sortable'>
              <thead>
                <tr>
                  <th>Type of crime</th>
                  <th>Type of offense</th>
                  <th>Date reported</th>
                  <th>Time</th>
                </tr>
              </thead>
              <tbody id='results_list'>
              </tbody>
            </table>
          </div><!-- /#results -->
          <div id='empty-msg'>
            <div class='col-xs-4'>
              <h3 class='text-right'><i class='icon-exclamation-sign'></i></h3>
            </div>
            <div class='col-xs-8'>
              <h3>No results matched your search.</h3>
              <p>Try changing the filters to alter your search.</p>
            </div>
          </div><!-- /#empty -->
        </div>
      </div>
    </div>
    <footer>
      <div class="container">
        <p>&copy; TCU 360<br /><small>Based on Derek Eder's <a href='http://derekeder.com/searchable_map_template/' target="_blank">Searchable Map Template</a></small></p>
      </div>
    </footer>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.10.8/jquery.tablesorter.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.10.8/jquery.tablesorter.widgets.min.js"></script>
    <script src="js/daterangepicker.min.js"></script>
    <script src="js/jquery.address.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false&amp;libraries=places"></script>
    <script src="js/oms.min.js"></script>
    <script src="js/jquery.geocomplete.min.js"></script>
    <script src="js/maps_lib.min.js"></script>
    <script>
        $(window).resize(function () {
          var width = $('#map_canvas').width();
          $('#map_canvas').height(width / 1.875);
        }).resize();
        
        $(function() {
          MapsLib.initialize();
          // $("#search_address").geocomplete();

          $(':checkbox').click(function(){
            MapsLib.doSearch();
          });

          $(':radio').click(function(){
            MapsLib.doSearch();
          });
          
          $('#search a.radius').click(function(){
            MapsLib.doSearch(null, $(this).data('distance'));
          });
          
          $('#find_me').click(function(){
            MapsLib.findMe(); 
            return false;
          });
          
          $('#search a.reset').click(function(){
            $.address.parameter('address','');
            MapsLib.initialize(); 
            return false;
          });
          
          $(":text").keydown(function(e){
              var key =  e.keyCode ? e.keyCode : e.which;
              if(key == 13) {
                  $('#search').click();
                  return false;
              }
          });
        });
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-2413775-6', 'tcu360.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>
